<!doctype html>
<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <link rel="icon" type="image/png" href="%VITE_APP_LOGO%" />
    <link rel="apple-touch-icon" href="%VITE_APP_LOGO%" />
    <title>%VITE_APP_TITLE%</title>
    <!-- Add Google Fonts here, example:
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    -->
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="./client/src/main.tsx"></script>
    <script
      defer
      src="%VITE_ANALYTICS_ENDPOINT%/umami"
      data-website-id="%VITE_ANALYTICS_WEBSITE_ID%"></script>
    
    <!-- Handle GitHub Pages routing for SPA -->
    <script>
      (function(){
        // Check if we came from 404.html redirect
        var queryParams = new URLSearchParams(window.location.search);
        var route = queryParams.get('route');
        
        if (route) {
          // Reconstruct the URL without the route parameter
          var basePath = '/about-me';
          var newUrl = basePath + '/' + decodeURIComponent(route).slice(1);
          
          // Use history.replaceState to update URL without reload
          window.history.replaceState(null, null, newUrl);
          
          // Remove the route parameter so React router handles it
          if (window.location.search.includes('route=')) {
            var cleanUrl = basePath + '/' + decodeURIComponent(route).slice(1);
            window.history.replaceState(null, null, cleanUrl);
          }
        }
        
        var redirect = sessionStorage.redirect;
        delete sessionStorage.redirect;
        if (redirect && redirect !== location.href) {
          history.replaceState(null, null, redirect);
        }
      }());
    </script>
  </body>

</html>